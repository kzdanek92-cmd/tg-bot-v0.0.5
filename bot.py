"""
AI-–§—Ä–∏–ª–∞–Ω—Å –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç - Telegram Bot
–í–µ—Ä—Å–∏—è: Prototype 0.1
–û–ø–∏—Å–∞–Ω–∏–µ: –ë–æ—Ç —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤
"""

import asyncio
import json
import os
from datetime import datetime
from aiogram import Bot, Dispatcher, types, F
from aiogram.filters import Command
from aiogram.types import Message

# ============================================================================
# –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
# ============================================================================

# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω –æ—Ç @BotFather)
BOT_TOKEN = "8377810720:AAH_HA42Cezxe0apHh24DuyDxAiBvPstGHI"

# –§–∞–π–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
USER_DATA_FILE = "user_data.json"

# ============================================================================
# –¢–ï–°–¢–û–í–´–ï –î–ê–ù–ù–´–ï - –°–ü–ò–°–û–ö –ó–ê–î–ê–ù–ò–ô
# ============================================================================

TASKS = [
    {
        "id": 1,
        "title": "–ù–∞–ø–∏—Å–∞—Ç—å —Ä–µ–∫–ª–∞–º–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ—Ñ–µ–π–Ω–∏",
        "description": "–ù—É–∂–µ–Ω –∫–æ—Ä–æ—Ç–∫–∏–π —Ä–µ–∫–ª–∞–º–Ω—ã–π —Ç–µ–∫—Å—Ç (200-300 —Å–∏–º–≤–æ–ª–æ–≤) –¥–ª—è Instagram",
        "budget": 500,
        "category": "–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥"
    },
    {
        "id": 2,
        "title": "–ü—Ä–∏–¥—É–º–∞—Ç—å —Å–ª–æ–≥–∞–Ω –¥–ª—è IT-—Å—Ç–∞—Ä—Ç–∞–ø–∞",
        "description": "–°—Ç–∞—Ä—Ç–∞–ø –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π",
        "budget": 300,
        "category": "–ö—Ä–µ–∞—Ç–∏–≤"
    },
    {
        "id": 3,
        "title": "–ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π",
        "description": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç, –æ–∫–æ–ª–æ 100 —Å–ª–æ–≤",
        "budget": 400,
        "category": "–ü–µ—Ä–µ–≤–æ–¥—ã"
    },
    {
        "id": 4,
        "title": "–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞",
        "description": "–ù–∞–ø–∏—Å–∞—Ç—å SEO-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏",
        "budget": 350,
        "category": "–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥"
    },
    {
        "id": 5,
        "title": "–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –¥–ª—è LinkedIn",
        "description": "–ü–æ—Å—Ç –æ –≤–∞–∂–Ω–æ—Å—Ç–∏ soft skills –≤ IT",
        "budget": 250,
        "category": "SMM"
    }
]

# ============================================================================
# –†–ê–ë–û–¢–ê –° –î–ê–ù–ù–´–ú–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô
# ============================================================================

def load_user_data():
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ JSON-—Ñ–∞–π–ª–∞"""
    if os.path.exists(USER_DATA_FILE):
        with open(USER_DATA_FILE, 'r', encoding='utf-8') as f:
            return json.load(f)
    return {}


def save_user_data(data):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ JSON-—Ñ–∞–π–ª"""
    with open(USER_DATA_FILE, 'w', encoding='utf-8') as f:
        json.dump(data, f, ensure_ascii=False, indent=2)


def get_user(user_id):
    """–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ"""
    users = load_user_data()
    user_id_str = str(user_id)
    
    if user_id_str not in users:
        users[user_id_str] = {
            "balance": 0,
            "responses": [],
            "created_at": datetime.now().isoformat()
        }
        save_user_data(users)
    
    return users[user_id_str]


def update_user(user_id, data):
    """–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    users = load_user_data()
    users[str(user_id)] = data
    save_user_data(users)

# ============================================================================
# AI-–ì–ï–ù–ï–†–ê–¶–ò–Ø –û–¢–ö–õ–ò–ö–û–í (–ó–ê–ì–õ–£–®–ö–ê)
# ============================================================================

def generate_response(task):
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ (–∏–º–∏—Ç–∞—Ü–∏—è AI)
    –í –≤–µ—Ä—Å–∏–∏ 0.2 –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–∞—è AI-–º–æ–¥–µ–ª—å
    """
    templates = {
        "–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥": [
            f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ì–æ—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–¥–∞–Ω–∏–µ '{task['title']}'. "
            f"–ò–º–µ—é –æ–ø—ã—Ç –≤ –∫–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥–µ, –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –≤—ã—à–ª—é –≤ –ª–∏—á–∫—É. "
            f"–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 1-2 –¥–Ω—è. –ñ–¥—É –≤–∞—à–µ–≥–æ –æ—Ç–≤–µ—Ç–∞!",
            
            f"–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –ó–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª–æ –≤–∞—à–µ –∑–∞–¥–∞–Ω–∏–µ. "
            f"–ù–∞–ø–∏—à—É –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å —É—á–µ—Ç–æ–º —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. "
            f"–ì–æ—Ç–æ–≤ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π."
        ],
        "–ö—Ä–µ–∞—Ç–∏–≤": [
            f"–ü—Ä–∏–≤–µ—Ç! –ó–∞–¥–∞–Ω–∏–µ '{task['title']}' –≤—ã–≥–ª—è–¥–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. "
            f"–ü—Ä–µ–¥–ª–æ–∂—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–ª–æ–≥–∞–Ω–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä. "
            f"–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –±—Ä–µ–Ω–¥–∏–Ω–≥–æ–º –µ—Å—Ç—å, –ø—Ä–∏–º–µ—Ä—ã –ø–æ–∫–∞–∂—É.",
            
            f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Äî –º–æ—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è. "
            f"–†–∞–∑—Ä–∞–±–æ—Ç–∞—é –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –ø–æ–¥ –≤–∞—à –±—Ä–µ–Ω–¥. –û–±—Å—É–¥–∏–º?"
        ],
        "–ü–µ—Ä–µ–≤–æ–¥—ã": [
            f"–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í—ã–ø–æ–ª–Ω—é –ø–µ—Ä–µ–≤–æ–¥ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –≤ —Å—Ä–æ–∫. "
            f"–û–ø—ã—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ 3+ –≥–æ–¥–∞. "
            f"–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É—é —Ç–æ—á–Ω–æ—Å—Ç—å –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏.",
            
            f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ì–æ—Ç–æ–≤ –≤–∑—è—Ç—å—Å—è –∑–∞ –ø–µ—Ä–µ–≤–æ–¥. "
            f"–ù–æ—Å–∏—Ç–µ–ª—å —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, –æ—Ç–ª–∏—á–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ. "
            f"–°—Ä–æ–∫: 1 –¥–µ–Ω—å."
        ],
        "SMM": [
            f"–ü—Ä–∏–≤–µ—Ç! –ó–∞–¥–∞–Ω–∏–µ '{task['title']}' –º–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç. "
            f"–°–æ–∑–¥–∞–º –≤–æ–≤–ª–µ–∫–∞—é—â–∏–π –ø–æ—Å—Ç —Å —É—á–µ—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ LinkedIn. "
            f"–ï—Å—Ç—å –æ–ø—ã—Ç –≤–µ–¥–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–æ–≤.",
            
            f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ù–∞–ø–∏—à—É –ø–æ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–π–¥–µ—Ç –≤–∞—à–µ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. "
            f"–£—á—Ç—É —Ç—Ä–µ–Ω–¥—ã –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –û–±—Å—É–¥–∏–º –¥–µ—Ç–∞–ª–∏?"
        ]
    }
    
    category = task.get("category", "–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥")
    import random
    response_text = random.choice(templates.get(category, templates["–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥"]))
    
    return response_text

# ============================================================================
# –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ë–û–¢–ê
# ============================================================================

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

# ============================================================================
# –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–û–ú–ê–ù–î
# ============================================================================

@dp.message(Command("start"))
async def cmd_start(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
    welcome_text = """
ü§ñ <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ AI-–§—Ä–∏–ª–∞–Ω—Å –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç!</b>

–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ñ—Ä–∏–ª–∞–Ω—Å-–±–∏—Ä–∂–∞—Ö.
–≠—Ç–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø –≤–µ—Ä—Å–∏–∏ 0.1 ‚Äî –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏.

<b>üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>
/tasks ‚Äî –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
/respond &lt;task_id&gt; ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–∫–ª–∏–∫ –Ω–∞ –∑–∞–¥–∞–Ω–∏–µ
/balance ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–π –±–∞–ª–∞–Ω—Å
/my_responses ‚Äî –ò—Å—Ç–æ—Ä–∏—è —Ç–≤–æ–∏—Ö –æ—Ç–∫–ª–∏–∫–æ–≤
/help ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É

<b>üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</b>
1. –°–º–æ—Ç—Ä–∏—à—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π (/tasks)
2. –í—ã–±–∏—Ä–∞–µ—à—å –∑–∞–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –æ—Ç–∫–ª–∏–∫ (/respond 1)
3. –ü–æ–ª—É—á–∞–µ—à—å +50‚ÇΩ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å
4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—à—å —Å–≤–æ–∏ –æ—Ç–∫–ª–∏–∫–∏ (/my_responses)

–£–¥–∞—á–∏! üöÄ
"""
    await message.answer(welcome_text, parse_mode="HTML")


@dp.message(Command("help"))
async def cmd_help(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
    await cmd_start(message)


@dp.message(Command("tasks"))
async def cmd_tasks(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /tasks - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π"""
    if not TASKS:
        await message.answer("‚ùå –ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π.")
        return
    
    response = "üìã <b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è:</b>\n\n"
    
    for task in TASKS:
        response += f"<b>ID: {task['id']}</b>\n"
        response += f"üìå {task['title']}\n"
        response += f"üìù {task['description']}\n"
        response += f"üí∞ –ë—é–¥–∂–µ—Ç: {task['budget']}‚ÇΩ\n"
        response += f"üè∑ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {task['category']}\n"
        response += f"‚û°Ô∏è –û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è: /respond {task['id']}\n"
        response += "‚îÄ" * 30 + "\n\n"
    
    await message.answer(response, parse_mode="HTML")


@dp.message(Command("respond"))
async def cmd_respond(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /respond <task_id> - –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∫–ª–∏–∫–∞"""
    # –ü–∞—Ä—Å–∏–º task_id –∏–∑ –∫–æ–º–∞–Ω–¥—ã
    try:
        parts = message.text.split()
        if len(parts) < 2:
            await message.answer(
                "‚ùå –£–∫–∞–∂–∏ ID –∑–∞–¥–∞–Ω–∏—è!\n"
                "–ü—Ä–∏–º–µ—Ä: /respond 1"
            )
            return
        
        task_id = int(parts[1])
    except ValueError:
        await message.answer("‚ùå ID –∑–∞–¥–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å–ª–æ–º!")
        return
    
    # –ò—â–µ–º –∑–∞–¥–∞–Ω–∏–µ
    task = next((t for t in TASKS if t["id"] == task_id), None)
    if not task:
        await message.answer(f"‚ùå –ó–∞–¥–∞–Ω–∏–µ —Å ID {task_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!")
        return
    
    # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_data = get_user(message.from_user.id)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Ç–∫–ª–∏–∫–∞–ª—Å—è –ª–∏ —É–∂–µ –Ω–∞ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ
    if any(r["task_id"] == task_id for r in user_data["responses"]):
        await message.answer("‚ö†Ô∏è –¢—ã —É–∂–µ –æ—Ç–∫–ª–∏–∫–∞–ª—Å—è –Ω–∞ —ç—Ç–æ –∑–∞–¥–∞–Ω–∏–µ!")
        return
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–∫–ª–∏–∫
    response_text = generate_response(task)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–∫–ª–∏–∫
    response_data = {
        "task_id": task_id,
        "task_title": task["title"],
        "response_text": response_text,
        "timestamp": datetime.now().isoformat(),
        "earned": 50
    }
    user_data["responses"].append(response_data)
    user_data["balance"] += 50
    
    update_user(message.from_user.id, user_data)
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    result = f"""
‚úÖ <b>–û—Ç–∫–ª–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!</b>

<b>–ó–∞–¥–∞–Ω–∏–µ:</b> {task['title']}

<b>–¢–≤–æ–π –æ—Ç–∫–ª–∏–∫:</b>
<i>{response_text}</i>

üí∞ <b>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ:</b> +50‚ÇΩ
üí≥ <b>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:</b> {user_data['balance']}‚ÇΩ

–ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ! üöÄ
"""
    await message.answer(result, parse_mode="HTML")


@dp.message(Command("balance"))
async def cmd_balance(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /balance - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å"""
    user_data = get_user(message.from_user.id)
    
    balance_text = f"""
üí≥ <b>–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</b>

üí∞ –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <b>{user_data['balance']}‚ÇΩ</b>
üìä –û—Ç–∫–ª–∏–∫–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: <b>{len(user_data['responses'])}</b>

<i>–û—Ç–ø—Ä–∞–≤–ª—è–π –æ—Ç–∫–ª–∏–∫–∏ –Ω–∞ –∑–∞–¥–∞–Ω–∏—è, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –±–∞–ª–∞–Ω—Å!</i>
"""
    await message.answer(balance_text, parse_mode="HTML")


@dp.message(Command("my_responses"))
async def cmd_my_responses(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /my_responses - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –æ—Ç–∫–ª–∏–∫–æ–≤"""
    user_data = get_user(message.from_user.id)
    
    if not user_data["responses"]:
        await message.answer(
            "üì≠ –£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∫–ª–∏–∫–æ–≤.\n"
            "–ò—Å–ø–æ–ª—å–∑—É–π /tasks —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è!"
        )
        return
    
    response = "üìú <b>–ò—Å—Ç–æ—Ä–∏—è —Ç–≤–æ–∏—Ö –æ—Ç–∫–ª–∏–∫–æ–≤:</b>\n\n"
    
    for idx, resp in enumerate(user_data["responses"], 1):
        timestamp = datetime.fromisoformat(resp["timestamp"]).strftime("%d.%m.%Y %H:%M")
        response += f"<b>{idx}. {resp['task_title']}</b>\n"
        response += f"üìÖ {timestamp}\n"
        response += f"üí¨ <i>{resp['response_text'][:100]}...</i>\n"
        response += f"üí∞ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: {resp['earned']}‚ÇΩ\n"
        response += "‚îÄ" * 30 + "\n\n"
    
    response += f"\nüí≥ <b>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å:</b> {user_data['balance']}‚ÇΩ"
    
    await message.answer(response, parse_mode="HTML")


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
@dp.message()
async def unknown_command(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    await message.answer(
        "‚ùì –ù–µ –ø–æ–Ω–∏–º–∞—é —ç—Ç—É –∫–æ–º–∞–Ω–¥—É.\n"
        "–ò—Å–ø–æ–ª—å–∑—É–π /help —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥."
    )

# ============================================================================
# –ó–ê–ü–£–°–ö –ë–û–¢–ê
# ============================================================================

async def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    print("ü§ñ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    print("–ù–∞–∂–º–∏ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
    
    # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞–µ–º polling
    await bot.delete_webhook(drop_pending_updates=True)
    await dp.start_polling(bot)


if __name__ == "__main__":
    asyncio.run(main())


# ============================================================================
# TODO: –í–ï–†–°–ò–Ø 0.2
# ============================================================================
"""
üìã –ü–õ–ê–ù–´ –ù–ê –í–ï–†–°–ò–Æ 0.2:

1. üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ—Ä–∏–ª–∞–Ω—Å-–±–∏—Ä–∂–∞–º–∏:
   - API FL.ru
   - API Kwork
   - API Freelance.ru
   - –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–¥–∞–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

2. ü§ñ –ù–∞—Å—Ç–æ—è—â–∞—è AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–∏–∫–æ–≤:
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI GPT
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å YandexGPT
   - –õ–æ–∫–∞–ª—å–Ω—ã–µ LLM –º–æ–¥–µ–ª–∏ (llama.cpp)
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª–∏–∫–æ–≤ –ø–æ–¥ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

3. üë§ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–µ–π:
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å email
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –±–∏—Ä–∂
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞
   - –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –Ω–∞–≤—ã–∫–∏

4. üí∏ –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è –∏ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤:
   - –†–µ–∞–ª—å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ –ÆKassa/Stripe
   - –ü–æ–¥–ø–∏—Å–∫–∏ (Basic/Pro/Premium)
   - –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∫–∞—Ä—Ç—É
   - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

5. üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –æ—Ç–∫–ª–∏–∫–æ–≤
   - –õ—É—á—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è –æ—Ç–∫–ª–∏–∫–æ–≤
   - –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

6. üéØ –£–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∑–∞–¥–∞–Ω–∏–π:
   - –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –§–∏–ª—å—Ç—Ä –ø–æ –±—é–¥–∂–µ—Ç—É
   - –§–∏–ª—å—Ç—Ä –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–∫–ª–∏–∫–∏ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º

7. üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
   - –ü–µ—Ä–µ—Ö–æ–¥ —Å JSON –Ω–∞ PostgreSQL/MongoDB
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

8. üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
   - Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏—è—Ö
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–≤–µ—Ç–∞—Ö –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –¥–µ–¥–ª–∞–π–Ω–∞—Ö

9. üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
   - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
   - –î–∞—à–±–æ—Ä–¥ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–∞–º–∏

10. üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
    - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    - 2FA –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    - –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞
    - Rate limiting
"""
