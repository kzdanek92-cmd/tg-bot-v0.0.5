üìö –í–ï–†–°–ò–Ø 0.0.5 ‚Äî –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–Æ –ò –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ
================================================================================

üöÄ –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–û–ï–ö–¢–ê: –ì–û–¢–û–í–û –ö –†–ê–ó–í–Å–†–¢–´–í–ê–ù–ò–Æ

================================================================================
‚úÖ –ß–¢–û –ë–´–õ–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
================================================================================

1. –ü–õ–ê–¢–ï–ñ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê (3 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞)
   ‚úì CryptoBot API –¥–ª—è TON, USDT, BTC
   ‚úì FreeKassa –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ä—É–±–ª–∏, –∫–∞—Ä—Ç—ã, –∫–æ—à–µ–ª—å–∫–∏)
   ‚úì –ï–¥–∏–Ω–æ–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã
   ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

2. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–õ–ê–¢–ï–ñ–ï–ô
   ‚úì HTTP —Å–µ—Ä–≤–µ—Ä (aiohttp) –¥–ª—è –ø—Ä–∏—ë–º–∞ webhook'–æ–≤
   ‚úì –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ
   ‚úì –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤ (CoinGecko API)
   ‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –≤ Supabase (—Ç–∞–±–ª–∏—Ü–∞ payments)

3. –ë–ê–ó–ê –î–ê–ù–ù–´–•
   ‚úì –ú–∏–≥—Ä–∞—Ü–∏—è SQL –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã payments
   ‚úì –°—Ç—Ä—É–∫—Ç—É—Ä–∞: user_id, currency, amount, tx_id, status, meta, created_at
   ‚úì –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
   ‚úì –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è updated_at

4. –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
   ‚úì UPGRADE_TO_v0.0.5.md ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –º–∏–≥—Ä–∞—Ü–∏–∏
   ‚úì TESTING_GUIDE_v0.0.5.md ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   ‚úì test_webhooks.py ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook'–æ–≤
   ‚úì –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π CHANGELOG_v0.0.0.5.md

================================================================================
üìÅ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í (—á—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ/–∏–∑–º–µ–Ω–µ–Ω–æ)
================================================================================

–ù–û–í–´–ï –§–ê–ô–õ–´:
‚îú‚îÄ‚îÄ payments/freekassa.py                   (~100 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ FreeKassaService –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FreeKassa
‚îÇ
‚îú‚îÄ‚îÄ services/exchange_service.py            (~150 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –°–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç —á–µ—Ä–µ–∑ CoinGecko API
‚îÇ
‚îú‚îÄ‚îÄ database/migrations/001_create_payments_table.sql
‚îÇ   ‚îî‚îÄ‚îÄ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã payments
‚îÇ
‚îú‚îÄ‚îÄ test_webhooks.py                        (~200 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook'–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ
‚îÇ
‚îú‚îÄ‚îÄ UPGRADE_TO_v0.0.5.md                    (~300 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ TESTING_GUIDE_v0.0.5.md                 (~200 —Å—Ç—Ä–æ–∫)
    ‚îî‚îÄ‚îÄ –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–û–ë–ù–û–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´:
‚îú‚îÄ‚îÄ bot.py                          (+200 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FreeKassaService
‚îÇ   ‚îú‚îÄ‚îÄ –ó–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è webhook'–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ CryptoBot callback
‚îÇ   ‚îî‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ FreeKassa callback
‚îÇ
‚îú‚îÄ‚îÄ config.py                       (+20 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ FreeKassa
‚îÇ
‚îú‚îÄ‚îÄ database/models.py              (+50 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å Payment
‚îÇ
‚îú‚îÄ‚îÄ database/supabase_client.py     (+100 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ create_payment()
‚îÇ   ‚îú‚îÄ‚îÄ update_payment_status()
‚îÇ   ‚îú‚îÄ‚îÄ get_payment_by_tx()
‚îÇ   ‚îî‚îÄ‚îÄ get_payments_by_user()
‚îÇ
‚îú‚îÄ‚îÄ handlers/payments_handler.py    (~500 —Å—Ç—Ä–æ–∫) ‚Äî –ü–û–õ–ù–ê–Ø –ü–ï–†–ï–†–ê–ë–û–¢–ö–ê
‚îÇ   ‚îú‚îÄ‚îÄ –ï–¥–∏–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–Ω–≤–æ–π—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö –≤–∞–ª—é—Ç
‚îÇ   ‚îú‚îÄ‚îÄ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è USDT/BTC
‚îÇ   ‚îú‚îÄ‚îÄ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è FreeKassa
‚îÇ   ‚îú‚îÄ‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å convert_to_rub()
‚îÇ   ‚îî‚îÄ‚îÄ –ó–∞–ø–∏—Å—å –ø–ª–∞—Ç–µ–∂–µ–π –≤ Supabase
‚îÇ
‚îú‚îÄ‚îÄ ui/menus.py                     (+30 —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ –û–±–Ω–æ–≤–ª–µ–Ω–æ –º–µ–Ω—é –æ–ø–ª–∞—Ç—ã (4 —Å–ø–æ—Å–æ–±–∞)
‚îÇ   ‚îú‚îÄ‚îÄ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ–Ω—é FreeKassa —Å—É–º–º
‚îÇ   ‚îî‚îÄ‚îÄ –û–±–Ω–æ–≤–ª–µ–Ω—ã inline-–∫–Ω–æ–ø–∫–∏
‚îÇ
‚îî‚îÄ‚îÄ payments/__init__.py            (+2 —Å—Ç—Ä–æ–∫)
    ‚îî‚îÄ‚îÄ –≠–∫—Å–ø–æ—Ä—Ç FreeKassaService

================================================================================
üîß –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢
================================================================================

–®–ê–ì–ò:

1. –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª:
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   BOT_TOKEN=<–≤–∞—à_—Ç–æ–∫–µ–Ω>
   SUPABASE_URL=https://your-project.supabase.co
   SUPABASE_KEY=<–≤–∞—à_–∫–ª—é—á>
   CRYPTOBOT_TOKEN=<cryptobot_—Ç–æ–∫–µ–Ω>          # –î–ª—è CryptoBot
   FREEKASSA_MERCHANT_ID=<merchant_id>        # –î–ª—è FreeKassa (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   FREEKASSA_SECRET1=<secret1>
   FREEKASSA_SECRET2=<secret2>

2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î:
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   - –û—Ç–∫—Ä—ã—Ç—å Supabase Console ‚Üí SQL Editor
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ: database/migrations/001_create_payments_table.sql
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å

3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç:
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   python bot.py

4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   - –ù–∞–ø–∏—Å–∞—Ç—å /start –±–æ—Ç—É –≤ Telegram
   - –ù–∞–∂–∞—Ç—å "üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
   - –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
   - –í—ã–±—Ä–∞—Ç—å —Å—É–º–º—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase —Ç–∞–±–ª–∏—Ü—É payments

================================================================================
üìä –°–¢–†–£–ö–¢–£–†–ê –ü–õ–ê–¢–ï–ñ–ê –í –ë–ê–ó–ï
================================================================================

–¢–∞–±–ª–∏—Ü–∞: payments

user_id        ‚Üí Telegram User ID (int64)
currency       ‚Üí TON, USDT, BTC, RUB (varchar)
amount         ‚Üí –°—É–º–º–∞ –≤ –≤–∞–ª—é—Ç–µ (float)
tx_id          ‚Üí Invoice ID –∏–ª–∏ Order ID (varchar, unique)
status         ‚Üí pending | paid | failed | expired
meta           ‚Üí JSON (invoice data, provider info, etc)
created_at     ‚Üí –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
updated_at     ‚Üí –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)

–ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏:
{
  "user_id": 123456789,
  "currency": "TON",
  "amount": 10.5,
  "tx_id": "invoice_123456_abc",
  "status": "paid",
  "meta": {"provider": "cryptobot", "invoice_id": "123456"},
  "created_at": "2025-11-15 10:30:00"
}

================================================================================
üîå ENDPOINTS WEBHOOK'–û–í
================================================================================

CryptoBot:
  POST /webhook/cryptobot
  Content-Type: application/json
  
  –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–ª—è:
  - update_type: string
  - payload: object { invoice_id, currency, amount, hash, ... }

FreeKassa:
  POST /webhook/freekassa
  Content-Type: application/x-www-form-urlencoded
  
  –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–ª—è:
  - MERCHANT_ID: string
  - AMOUNT: string
  - MERCHANT_ORDER_ID: string
  - SIGN: string (MD5 –ø–æ–¥–ø–∏—Å—å)

–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
  python test_webhooks.py

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ngrok:
  1. ngrok http 8080
  2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL
  3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
  4. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂

================================================================================
üí± –°–ò–°–¢–ï–ú–ê –ö–û–ù–í–ï–†–¢–ê–¶–ò–ò –í–ê–õ–Æ–¢
================================================================================

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–µ—Ä–≤–∏—Å ExchangeRateService —Å:

‚úì –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å CoinGecko API (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±–µ–∑ –∫–ª—é—á–∞)
‚úì –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫—É—Ä—Å–æ–≤ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)
‚úì Fallback –Ω–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã
‚úì –§—É–Ω–∫—Ü–∏–µ–π convert_to_rub(amount, currency)

–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫—É—Ä—Å—ã (fallback):
- 1 TON = 50 RUB
- 1 USDT = 100 RUB
- 1 BTC = 2,500,000 RUB

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
  from services.exchange_service import convert_to_rub
  
  amount_rub = await convert_to_rub(10, "TON")  # ~500 RUB

================================================================================
üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï
================================================================================

–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
  1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç:
     python bot.py
  
  2. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:
     python test_webhooks.py
  
  3. –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
     ‚úì CryptoBot webhook —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
     ‚úì FreeKassa webhook —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
     ‚úì –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ webhook'–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã

–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
  1. –ù–∞–ø–∏—Å–∞—Ç—å /start –±–æ—Ç—É
  2. –ù–∞–∂–∞—Ç—å "üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
  3. –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã (TON/USDT/BTC/FreeKassa)
  4. –í—ã–±—Ä–∞—Ç—å —Å—É–º–º—É
  5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase —á—Ç–æ —Å–æ–∑–¥–∞–ª–∞—Å—å –∑–∞–ø–∏—Å—å –≤ payments
  6. –ù–∞–∂–∞—Ç—å "üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É" ‚Üí —Å—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "pending"
  7. –ü—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç–µ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "paid"

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
  tail -f bot.log  # Unix/Mac
  Get-Content bot.log -Tail 20 -Wait  # PowerShell

–ò—â–∏—Ç–µ —Ç–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
  ‚úì "–ü–ª–∞—Ç–µ–∂ —Å–æ–∑–¥–∞–Ω"
  ‚úì "–°—á–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
  ‚úì "–ü–ª–∞—Ç–µ–∂ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω"
  ‚úì "Callback HTTP server started"

================================================================================
üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
================================================================================

‚úì –í—Å–µ API –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env (–Ω–µ –≤ git!)
‚úì –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π webhook'–æ–≤ (MD5 –¥–ª—è FreeKassa)
‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø–µ—Ä–µ–¥ –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ–º
‚úì –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
‚úì HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è production (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã)

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è webhook'–æ–≤)
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ rate limiting –¥–ª—è HTTP endpoints
- –î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è admin –æ–ø–µ—Ä–∞—Ü–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ –±—ç–∫–∞–ø—å—Ç–µ –ë–î
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

================================================================================
‚ùì FAQ / –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò
================================================================================

‚ùå "CryptoBot service not initialized"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CRYPTOBOT_TOKEN –≤ .env
‚Üí –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç

‚ùå "FreeKassa service not configured"
‚Üí –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ FreeKassa
‚Üí –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äî –∑–∞–ø–æ–ª–Ω–∏—Ç–µ FREEKASSA_* –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

‚ùå "Callback HTTP server not started"
‚Üí –ü–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç –∏–ª–∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç–µ 8080
‚Üí Windows: netstat -an | findstr :8080

‚ùå "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SUPABASE_URL –∏ SUPABASE_KEY
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ payments —Å–æ–∑–¥–∞–Ω–∞ (–º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞)

‚ùå "Invalid webhook signature"
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SECRET1/SECRET2 –¥–ª—è FreeKassa
‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ª–∏—á–Ω—ã–º –∫–∞–±–∏–Ω–µ—Ç–æ–º FreeKassa

================================================================================
üìû –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê
================================================================================

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ UPGRADE_TO_v0.0.5.md
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ TESTING_GUIDE_v0.0.5.md
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ bot.log –Ω–∞ –æ—à–∏–±–∫–∏
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º: @Danyadlyalubvi2

================================================================================
üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (v0.0.6)
================================================================================

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è pending_invoices
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ —Å –±–æ–Ω—É—Å–∞–º–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π –≤ CSV/Excel
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–∞ (push)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Stripe –∏ –ÆKassa
- [ ] Admin –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞–º–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫—É—Ä—Å–∞ (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—É—Ç–∫–∏)

================================================================================
‚úÖ –°–¢–ê–¢–£–° –í–ï–†–°–ò–ò 0.0.5
================================================================================

–í–µ—Ä—Å–∏—è: 0.0.5
–î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞: 15.11.2025
–ö–æ–¥–æ–≤–æ–µ –∏–º—è: "Full Payments & Integration Update"
–°—Ç–∞—Ç—É—Å: üöÄ Production Ready

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã.
–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –≤ production.

================================================================================
