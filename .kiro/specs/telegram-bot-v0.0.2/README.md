# –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è: Telegram Bot Version 0.0.2

## –û–±–∑–æ—Ä

–≠—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –≤–µ—Ä—Å–∏–∏ 0.0.2 AI-–§—Ä–∏–ª–∞–Ω—Å –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ ‚Äî –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–æ—Ñ–∏–ª–µ–π, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Supabase –∏ inline-–∫–Ω–æ–ø–æ–∫.

## –°—Ç–∞—Ç—É—Å

üü° **–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ** - –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### ‚ú® –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º /start
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ username –∏–∑ Telegram
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

2. **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π**
   - –•—Ä–∞–Ω–µ–Ω–∏–µ: user_id, username, balance, completed_tasks, role, created_at
   - –ö–æ–º–∞–Ω–¥–∞ /profile –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
   - Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–º

3. **Inline-–∫–Ω–æ–ø–∫–∏**
   - üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞–Ω–∏–π
   - ‚úçÔ∏è –ú–æ–∏ –æ—Ç–∫–ª–∏–∫–∏
   - üí∞ –ë–∞–ª–∞–Ω—Å
   - üßæ –ü—Ä–æ—Ñ–∏–ª—å
   - üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–∑–∞–≥–ª—É—à–∫–∞)

4. **Supabase Integration**
   - –¢–∞–±–ª–∏—Ü–∞ users –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –¢–∞–±–ª–∏—Ü–∞ responses –¥–ª—è –æ—Ç–∫–ª–∏–∫–æ–≤
   - –ó–∞–º–µ–Ω–∞ JSON –Ω–∞ PostgreSQL
   - REST API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

5. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–π error handler
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫

### üîÑ –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ v0.0.1

- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã (/start, /tasks, /respond, /balance, /my_responses)
- ‚úÖ AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–∫–ª–∏–∫–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω–∞–º
- ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∑–∞ –æ—Ç–∫–ª–∏–∫–∏ (+50‚ÇΩ)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–∫–ª–∏–∫–æ–≤
- ‚úÖ 5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üìã [requirements.md](./requirements.md)
–î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º EARS –∏ INCOSE —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤:
- 10 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- User stories —Å acceptance criteria
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### üèóÔ∏è [design.md](./design.md)
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º—ã:
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (handlers, services, database, keyboards)
- –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase
- Data flow –¥–∏–∞–≥—Ä–∞–º–º—ã
- –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ [tasks.md](./tasks.md)
–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- 11 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–¥–∞—á
- 30+ –ø–æ–¥–∑–∞–¥–∞—á
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Python 3.8+** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **aiogram 3.13.1** - Telegram Bot API
- **Supabase** - –æ–±–ª–∞—á–Ω–∞—è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **python-dotenv** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```
aiogram==3.13.1
supabase==2.3.0
python-dotenv==1.0.0
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
bot_v0.0.2/
‚îú‚îÄ‚îÄ bot.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ database/                 # –°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ supabase_client.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îî‚îÄ‚îÄ schema.sql
‚îú‚îÄ‚îÄ services/                 # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ user_service.py
‚îÇ   ‚îú‚îÄ‚îÄ task_service.py
‚îÇ   ‚îî‚îÄ‚îÄ ai_service.py
‚îú‚îÄ‚îÄ handlers/                 # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ profile_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ tasks_handler.py
‚îÇ   ‚îú‚îÄ‚îÄ balance_handler.py
‚îÇ   ‚îî‚îÄ‚îÄ callback_handler.py
‚îú‚îÄ‚îÄ keyboards/                # Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ inline_keyboards.py
‚îú‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ error_handler.py
‚îî‚îÄ‚îÄ migrations/               # –ú–∏–≥—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ migrate_from_json.py
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ users
```sql
CREATE TABLE users (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT UNIQUE NOT NULL,
    username TEXT NOT NULL,
    balance NUMERIC(10, 2) DEFAULT 0.00,
    completed_tasks INTEGER DEFAULT 0,
    role TEXT DEFAULT 'free',
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### –¢–∞–±–ª–∏—Ü–∞ responses
```sql
CREATE TABLE responses (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    task_id INTEGER NOT NULL,
    task_title TEXT NOT NULL,
    response_text TEXT NOT NULL,
    earned NUMERIC(10, 2) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);
```

## –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ v0.0.1

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–µ—Ä—Å–∏–∏ 0.0.1 –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
python migrations/migrate_from_json.py
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ß–∏—Ç–∞–µ—Ç user_data.json
- –°–æ–∑–¥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ Supabase
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤—Å–µ –æ—Ç–∫–ª–∏–∫–∏
- –í—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–∏–≥—Ä–∞—Ü–∏–∏

## –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ [supabase.com](https://supabase.com)
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å URL –∏ API Key
3. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –∏–∑ `database/schema.sql`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
cp .env.example .env

# –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
BOT_TOKEN=your_telegram_bot_token
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key
```

### 3. –ó–∞–ø—É—Å–∫

```bash
python bot.py
```

## –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –§–∞–∑–∞ 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ó–∞–¥–∞—á–∏ 1-2)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- Database Layer
- Supabase –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –§–∞–∑–∞ 2: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–ó–∞–¥–∞—á–∏ 3-4)
- Service Layer
- Keyboard Layer

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ó–∞–¥–∞—á–∏ 5-6)
- Handler Layer
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ó–∞–¥–∞—á–∏ 7-9)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ bot.py
- –ú–∏–≥—Ä–∞—Ü–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–∑–∞ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ó–∞–¥–∞—á–∏ 10-11)
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –î–µ–ø–ª–æ–π

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ 10 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å v0.0.1
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å Supabase

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚ö° –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è < 1 —Å–µ–∫
- ‚ö° –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è < 500ms
- ‚ö° –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∫–ª–∏–∫–∞ < 1 —Å–µ–∫

### –ö–∞—á–µ—Å—Ç–≤–æ
- üîí –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- üìù –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è v0.0.2, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v0.0.3 —Å:
- –†–µ–∞–ª—å–Ω–∞—è AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (OpenAI/YandexGPT)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API —Ñ—Ä–∏–ª–∞–Ω—Å-–±–∏—Ä–∂
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ (Free/Pro)
- –ü–ª–∞—Ç–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- –û—Ç–∫—Ä—ã—Ç—å issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º

---

**–í–µ—Ä—Å–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:** 1.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 14.11.2025  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ‚úÖ
